version: 1
frontend:
  phases:
    preBuild:
      commands:
        - npm ci
    build:
      commands:
        - npm run build
        # Create the missing file that Amplify expects
        - echo '{}' > out/required-server-files.json
        - echo "=== VERIFYING OUTPUT ==="
        - ls -la out/
        - echo "=== CHECKING REQUIRED FILE ==="
        - cat out/required-server-files.json
  artifacts:
    baseDirectory: out
    files:
      - '**/*'